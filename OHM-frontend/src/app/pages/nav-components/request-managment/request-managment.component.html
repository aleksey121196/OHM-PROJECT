<main class="main-content">
  <section class="employee-requests-section">
    <h2>Employee Requests</h2>

    <p class="loading-text" *ngIf="loading">Loading requests...</p>
    <p class="error-message" *ngIf="error">{{ error }}</p>

    <div class="request-card" *ngFor="let req of requests">
      <article>
        <header class="request-header">
          <p><strong>From:</strong> {{ req.FullName }} ({{ req.Department }})</p>
          <p><strong>Date:</strong> {{ req.Date | date:'shortDate' }}</p>
          <p><strong>Type:</strong> {{ req.RequestType }}</p>
        </header>

        <section class="request-description">
          <p><strong>Description:</strong> {{ req.RequestDescription }}</p>
        </section>

        <section class="request-response" *ngIf="req.Response">
          <p><strong>Response:</strong> {{ req.Response.Text }}</p>
          <p class="response-meta">By {{ req.Response.Responder }} on {{ req.Response.ResDate | date:'short' }}</p>
        </section>

        <section class="response-form" *ngIf="!req.Response">
          <label for="response-{{ req._id }}">Response</label>
          <textarea
            [(ngModel)]="responseTexts[req._id]"
            id="response-{{ req._id }}"
            rows="2"
            class="response-textarea"
          ></textarea>
          <button class="primary-btn" (click)="sendResponse(req._id)">Send Response</button>
        </section>
      </article>
    </div>
  </section>
</main>
