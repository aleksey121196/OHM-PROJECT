<main class="main-content">
  <section class="request-section">
    <h2>Requests</h2>

    <form class="request-form" (ngSubmit)="submitRequest()" autocomplete="off">
      <div class="form-group">
        <label for="Date">Date:</label>
        <input type="date" id="Date" name="Date" [(ngModel)]="Date" required />
      </div>

      <div class="form-group">
        <label for="RequestType">Request Type:</label>
        <select id="RequestType" name="RequestType" [(ngModel)]="RequestType" required>
          <option value="Equipment Problem">Equipment Problem</option>
          <option value="Task Assistance">Task Assistance</option>
          <option value="Personal">Personal</option>
        </select>
      </div>

      <div class="form-group">
        <label for="RequestDescription">Reason:</label>
        <textarea
          id="RequestDescription"
          name="RequestDescription"
          [(ngModel)]="RequestDescription"
          rows="4"
          required
        ></textarea>
      </div>

      <div class="btn-right">
        <button type="submit" class="primary-btn">Submit</button>
      </div>
    </form>
  </section>

  <section class="my-requests-section">
    <h2>My Requests</h2>

    <table *ngIf="reqdata.length" class="requests-table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Type</th>
          <th>Description</th>
          <th>Manager Response</th>
          <th>Response Date</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let req of reqdata">
          <td>{{ req.Date | date:'short' }}</td>
          <td>{{ req.RequestType }}</td>
          <td>{{ req.RequestDescription }}</td>
          <td>{{ req.Response?.Text || 'Not responded yet' }}</td>
          <td>{{ req.Response?.ResDate ? (req.Response.ResDate | date:'short') : '-' }}</td>
        </tr>
      </tbody>
    </table>

    <p *ngIf="reqdata.length === 0" class="no-requests-text">You have no requests.</p>
  </section>
</main>
